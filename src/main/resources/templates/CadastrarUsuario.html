<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	layout:decorator="LayoutPadrao">

<head>
<title>Cadastrar usuário</title>
</head>

<section layout:fragment="conteudo">
	<!-- 	Código revisado, finalizado. -->

	<form class="form-horizontal" data-toggle="validator" role="form" method="POST" action="/usuario" th:object="${usuario}">

		<div layout:include="MensagemGeral"></div>
		<div layout:include="MensagemErro"></div>


		<div class="panel panel-primary">

			<div class="panel-heading">
				<div class="clearfix">
					<h1 class="panel-title sg-title-panel">Novo usuário</h1>
				</div>
			</div>

			<div class="panel-body">

				<input type="hidden" th:field="*{codigo}" />

				<div class="form-group"	th:classappend="${#fields.hasErrors('nome')} ? 'has-error'">
					<label for="nome" class="col-sm-2 control-label">Nome:</label>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="nome" th:field="*{nome}" placeholder="Insira um nome para o usuário" data-error="Por favor, digite um nome para o usuário!"	th:required="required" />
						<div class="help-block with-errors"></div>
					</div>
				</div>

				<div class="form-group"	th:classappend="${#fields.hasErrors('setor')} ? 'has-error'">
					<label for="setor" class='col-sm-2 control-label'>Setor:</label>
					<div class="col-sm-4">
						<select class="form-control" name="setor" th:required="required">
							<option th:each="setor : ${todosSetores}" th:value="${setor}" th:text="${setor.descricao}"></option>
						</select>
						<div class="help-block with-errors"></div>
					</div>
				</div>

				<div class="form-group" th:classappend="${#fields.hasErrors('grupo')} ? 'has-error'">
					<label for="grupo" class='col-sm-2 control-label'>Grupo:</label>
					<div class="col-sm-4">
						<select class="form-control" name="grupo" th:required="required">
							<option th:each="grupo : ${todosGrupos}" th:value="${grupo.codigo}" th:text="${grupo.descricao}"></option>
						</select>
						<div class="help-block with-errors"></div>
					</div>
				</div>

				<div class="form-group"	th:classappend="${#fields.hasErrors('email')} ? 'has-error'">
					<label for="email" class='col-sm-2 control-label'>E-mail:</label>
					<div class="col-sm-4">
						<input type="email" class="form-control" id="email" th:field="*{email}" placeholder="email@email.com.br"
							data-error="Por favor, digite um formato de email válido!" th:required="required" />
						<div class="help-block with-errors"></div>
					</div>
				</div>

				<div class="form-group"	th:classappend="${#fields.hasErrors('login')} ? 'has-error'">
					<label for="login" class='col-sm-2 control-label'>Login:</label>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="login"	th:field="*{login}" placeholder="Insira o login desejado" data-error="Digite o login!" th:required="required" />
						<div class="help-block with-errors"></div>
					</div>
				</div>

				<div class="form-group"	th:classappend="${#fields.hasErrors('password')} ? 'has-error'">
					<label for="password" class="col-sm-2 control-label">Password:</label>
					<div class="col-sm-4">
						<input type="password" class="form-control" id="password" th:field="*{password}" placeholder="Insira sua senha"	data-minlenght="8" data-error="Senha deve conter no mínimo oito (8) caracteres!" th:required="required" />
						<div class="help-block with-errors"></div>
					</div>

				</div>

				<div class="form-group" th:classappend="${#fields.hasErrors('confPassword')} ? 'has-error'">
					<label for="confPassword" class='col-sm-2 control-label'>Confirmação password:</label>
					<div class="col-sm-4">
						<input type="password" class="form-control" id="confPassword" th:field="*{confPassword}" placeholder="Confirme sua senha" data-match="#password" data-match-error="Atenção, senhas diferentes!" th:required="required" />
						<div class="help-block with-errors"></div>
					</div>
				</div>

				<div class="form-group"	th:classappend="${#fields.hasErrors('ativo')} ? 'has-error'">
					<label for="ativo" class='col-sm-2 control-label'>Ativo?:</label>
					<div class="col-sm-4">
						<select class="selectpicker" th:required="required" th:field="*{ativo}">
							<option th:value="${true}">Sim</option>
							<option th:value="${false}">Não</option>
						</select>
					</div>
				</div>


				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-primary">Salvar</button>
						<a class="btn btn-default" th:href="@{/usuarios}">Cancelar</a>
					</div>
				</div>
			</div>
		</div>
	</form>
</section>

</html>